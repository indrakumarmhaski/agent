'use strict';const _0x28ef94=_0x2a43;function _0x2a43(_0x4ac24b,_0x5aa6de){const _0x5a8bf3=_0x5a8b();return _0x2a43=function(_0x2a4316,_0xa0a771){_0x2a4316=_0x2a4316-0x6b;let _0x2118ce=_0x5a8bf3[_0x2a4316];return _0x2118ce;},_0x2a43(_0x4ac24b,_0x5aa6de);}function _0x5a8b(){const _0x1097aa=['ERROR','/services/data/v','parse','243apjavb','71759HsnliA','6053688ajkybS','installPackage','create','build','execute','Errors','then','__esModule','from','RenameMetadata','../classes/error/rest-error','8207830NchXEg','value','./query.service','post','next','Package\x20installation\x20not\x20found','length','3767835CRkulX','__importDefault','../classes','SubscriberPackageVersion.Id\x20=\x20:packageId','throw','where','PACKAGE_INSTALLATION_NOT_FOUND','ErrorFactory','8HyzOcv','Status','9220505yjFJRD','QueryBuilder','default','Full','findLatestInstallationIdForPackage','__awaiter','/tooling/sobjects/PackageInstallRequest/','378264CXCBCl','39iHWOCV','UNKNOWN','done','get','142684eNrzxJ','defineProperty','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20Id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20PackageInstallRequest\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20SubscriberPackageVersionKey\x20=\x20\x27'];_0x5a8b=function(){return _0x1097aa;};return _0x5a8b();}(function(_0x214b6b,_0x1351f8){const _0x13324c=_0x2a43,_0x15f61b=_0x214b6b();while(!![]){try{const _0x37cbac=parseInt(_0x13324c(0x6f))/0x1*(parseInt(_0x13324c(0x8a))/0x2)+-parseInt(_0x13324c(0x94))/0x3*(parseInt(_0x13324c(0x98))/0x4)+parseInt(_0x13324c(0x82))/0x5+parseInt(_0x13324c(0x70))/0x6+-parseInt(_0x13324c(0x8c))/0x7+-parseInt(_0x13324c(0x93))/0x8*(-parseInt(_0x13324c(0x6e))/0x9)+-parseInt(_0x13324c(0x7b))/0xa;if(_0x37cbac===_0x1351f8)break;else _0x15f61b['push'](_0x15f61b['shift']());}catch(_0x415838){_0x15f61b['push'](_0x15f61b['shift']());}}}(_0x5a8b,0xb0df7));var __awaiter=this&&this[_0x28ef94(0x91)]||function(_0x5ed776,_0x1827f8,_0x4bafc0,_0x51d20f){function _0x39d941(_0x30a371){return _0x30a371 instanceof _0x4bafc0?_0x30a371:new _0x4bafc0(function(_0x2cdae9){_0x2cdae9(_0x30a371);});}return new(_0x4bafc0||(_0x4bafc0=Promise))(function(_0x3c09c5,_0x526db5){function _0x84097a(_0x2416d3){const _0x508728=_0x2a43;try{_0x4fb61e(_0x51d20f[_0x508728(0x7f)](_0x2416d3));}catch(_0x5d7932){_0x526db5(_0x5d7932);}}function _0x9b334d(_0x800a99){const _0x406bee=_0x2a43;try{_0x4fb61e(_0x51d20f[_0x406bee(0x86)](_0x800a99));}catch(_0xfa9cfb){_0x526db5(_0xfa9cfb);}}function _0x4fb61e(_0x4c477e){const _0x4e7658=_0x2a43;_0x4c477e[_0x4e7658(0x96)]?_0x3c09c5(_0x4c477e[_0x4e7658(0x7c)]):_0x39d941(_0x4c477e['value'])[_0x4e7658(0x76)](_0x84097a,_0x9b334d);}_0x4fb61e((_0x51d20f=_0x51d20f['apply'](_0x5ed776,_0x1827f8||[]))['next']());});},__importDefault=this&&this[_0x28ef94(0x83)]||function(_0x38af76){const _0x3f10e8=_0x28ef94;return _0x38af76&&_0x38af76[_0x3f10e8(0x77)]?_0x38af76:{'default':_0x38af76};};Object[_0x28ef94(0x99)](exports,_0x28ef94(0x77),{'value':!![]});const classes_1=require(_0x28ef94(0x84)),rest_error_1=__importDefault(require(_0x28ef94(0x7a))),query_service_1=__importDefault(require(_0x28ef94(0x7d))),constants_1=require('../constants');class PackagesService{static['isInstalled'](_0x2604ab,_0x4365be,_0x35509b,_0x5f59a8){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x5df9c3=_0x2a43;try{const _0x1f0a34=new classes_1[(_0x5df9c3(0x8d))]()['select']('Id')[_0x5df9c3(0x78)]('InstalledSubscriberPackage')[_0x5df9c3(0x87)](_0x5df9c3(0x85),{'packageId':_0x35509b})[_0x5df9c3(0x73)](),{records:_0x197a4a}=yield query_service_1[_0x5df9c3(0x8e)][_0x5df9c3(0x74)](_0x2604ab,_0x4365be,_0x1f0a34,!![],_0x5f59a8);return!!_0x197a4a[_0x5df9c3(0x81)];}catch(_0x2b9918){throw yield classes_1['ErrorFactory'][_0x5df9c3(0x72)](_0x2b9918);}});}static[_0x28ef94(0x71)](_0x50edc0,_0x32362b,_0x37dd0a,_0x489a8d){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x5c7479=_0x2a43;try{const _0x3e66a3={'SubscriberPackageVersionKey':_0x37dd0a,'NameConflictResolution':_0x5c7479(0x79),'SecurityType':_0x5c7479(0x8f)},{data:_0x1639d8}=yield _0x50edc0[_0x5c7479(0x7e)](_0x5c7479(0x6c)+_0x489a8d+'/tooling/sobjects/PackageInstallRequest',_0x3e66a3,_0x32362b);return{'installationId':_0x1639d8['id']};}catch(_0x3c7369){throw yield classes_1[_0x5c7479(0x89)][_0x5c7479(0x72)](_0x3c7369);}});}static['fetchStatus'](_0x22862e,_0x5dd439,_0xfed6e0,_0x26cab3){var _0x32db09;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x1ca87d=_0x2a43;try{const {data:_0x101501}=yield _0x22862e[_0x1ca87d(0x97)](_0x1ca87d(0x6c)+_0x26cab3+_0x1ca87d(0x92)+_0xfed6e0,_0x5dd439);if(_0x101501['Status']===_0x1ca87d(0x6b)||_0x101501[_0x1ca87d(0x8b)]===_0x1ca87d(0x95))throw rest_error_1[_0x1ca87d(0x8e)][_0x1ca87d(0x6d)](((_0x32db09=_0x101501[_0x1ca87d(0x75)])===null||_0x32db09===void 0x0?void 0x0:_0x32db09['errors'])||{'message':'Unknown\x20error'});return{'status':_0x101501['Status']};}catch(_0x2e794d){throw yield classes_1[_0x1ca87d(0x89)][_0x1ca87d(0x72)](_0x2e794d);}});}static[_0x28ef94(0x90)](_0xfbdfc4,_0x56d9f8,_0x1702d8,_0xdac25a){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x34073f=_0x2a43;try{const _0x45d951=_0x34073f(0x9a)+_0x1702d8+'\x27\x20AND\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SecurityType\x20=\x20\x27Full\x27\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ORDER\x20BY\x20SystemModstamp\x20DESC\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LIMIT\x201',{records:_0x2f3bc0}=yield query_service_1['default'][_0x34073f(0x74)](_0xfbdfc4,_0x56d9f8,_0x45d951,!![],_0xdac25a);if(!_0x2f3bc0[_0x34073f(0x81)])throw new classes_1['SalesforceError'](_0x34073f(0x80),constants_1['SalesforceConstants'][_0x34073f(0x88)],0x194);const {Id:_0x1e0894}=_0x2f3bc0['at'](0x0);return{'installationId':_0x1e0894};}catch(_0x1f7931){throw yield classes_1[_0x34073f(0x89)]['create'](_0x1f7931);}});}}exports['default']=PackagesService;