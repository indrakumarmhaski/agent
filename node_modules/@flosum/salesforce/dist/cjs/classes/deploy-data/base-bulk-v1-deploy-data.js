'use strict';const _0xf95f87=_0xbee4;(function(_0x3f9d3a,_0x5e818e){const _0x16ab02=_0xbee4,_0x536eeb=_0x3f9d3a();while(!![]){try{const _0x480769=parseInt(_0x16ab02(0xcd))/0x1+-parseInt(_0x16ab02(0xde))/0x2+-parseInt(_0x16ab02(0xd2))/0x3*(-parseInt(_0x16ab02(0xc9))/0x4)+parseInt(_0x16ab02(0xdd))/0x5*(-parseInt(_0x16ab02(0xbc))/0x6)+-parseInt(_0x16ab02(0xd7))/0x7*(-parseInt(_0x16ab02(0xbf))/0x8)+parseInt(_0x16ab02(0xb6))/0x9+parseInt(_0x16ab02(0xc8))/0xa*(-parseInt(_0x16ab02(0xe3))/0xb);if(_0x480769===_0x5e818e)break;else _0x536eeb['push'](_0x536eeb['shift']());}catch(_0x19b933){_0x536eeb['push'](_0x536eeb['shift']());}}}(_0x10ce,0xf2898));var __awaiter=this&&this['__awaiter']||function(_0x3c787b,_0x135cf9,_0x424a5e,_0x50a7fe){function _0x4ced61(_0x1a09fb){return _0x1a09fb instanceof _0x424a5e?_0x1a09fb:new _0x424a5e(function(_0x182ffe){_0x182ffe(_0x1a09fb);});}return new(_0x424a5e||(_0x424a5e=Promise))(function(_0x327a2c,_0x922721){const _0x52fbf3=_0xbee4;function _0x4f42c3(_0x5a6d32){const _0x10fc8e=_0xbee4;try{_0x42d268(_0x50a7fe[_0x10fc8e(0xe2)](_0x5a6d32));}catch(_0x20662e){_0x922721(_0x20662e);}}function _0x136034(_0x1006c0){const _0x3306e5=_0xbee4;try{_0x42d268(_0x50a7fe[_0x3306e5(0xdb)](_0x1006c0));}catch(_0x238917){_0x922721(_0x238917);}}function _0x42d268(_0x1e9a92){const _0x375feb=_0xbee4;_0x1e9a92[_0x375feb(0xbd)]?_0x327a2c(_0x1e9a92[_0x375feb(0xc5)]):_0x4ced61(_0x1e9a92[_0x375feb(0xc5)])['then'](_0x4f42c3,_0x136034);}_0x42d268((_0x50a7fe=_0x50a7fe['apply'](_0x3c787b,_0x135cf9||[]))[_0x52fbf3(0xe2)]());});},__importDefault=this&&this['__importDefault']||function(_0x2b0358){const _0x4dd992=_0xbee4;return _0x2b0358&&_0x2b0358[_0x4dd992(0xe7)]?_0x2b0358:{'default':_0x2b0358};};function _0xbee4(_0x1bbe9d,_0x48d771){const _0x10ce78=_0x10ce();return _0xbee4=function(_0xbee4dd,_0x169148){_0xbee4dd=_0xbee4dd-0xb3;let _0x1fc1a4=_0x10ce78[_0xbee4dd];return _0x1fc1a4;},_0xbee4(_0x1bbe9d,_0x48d771);}Object[_0xf95f87(0xb8)](exports,'__esModule',{'value':!![]});function _0x10ce(){const _0x1e2ffe=['parse','state','1780683zmJtFe','getBatchInfo','handleResultBatch','Error','timers/promises','3bRISeC','map','externalIdField','default','waitCompletionBatch','14ZKJjfG','castCsvValue','isTest','string','throw','Success','3346855YRJAaJ','3774428zUWZSI','includes','Closed','Bulk1BatchState','next','1027565ZRFGyd','objectName','../../enums/bulk1.enums','Created','__esModule','operation','jobId','../../utils/test.utils','Failed','13771044ekeEzT','createDate','defineProperty','../../services/bulk1.service','closeJob','getTime','6nYEizv','done','createJob','3149368WddPcQ','true','Bulk1JobState','./base-deploy-data','Queued','pollInterval','value','instance','close','250qlwJXB','7149004wTneYP','api'];_0x10ce=function(){return _0x1e2ffe;};return _0x10ce();}const bulk1_service_1=__importDefault(require(_0xf95f87(0xb9))),bulk1_enums_1=require(_0xf95f87(0xe5)),base_deploy_data_1=__importDefault(require(_0xf95f87(0xc2))),promises_1=require(_0xf95f87(0xd1)),test_utils_1=__importDefault(require(_0xf95f87(0xb4))),salesforce_error_class_1=__importDefault(require('../salesforce-error.class')),sync_1=require('csv-parse/sync'),TIME_BULK_JOB_REMAIN_OPEN=0x4ef6d80,POOL_INTERVAL_CHEK_STATUS_BATCH=0x7530;class BaseBulkv1DeployData extends base_deploy_data_1[_0xf95f87(0xd5)]{constructor({instance:_0x447f26,objectName:_0x126486,externalIdField:_0x557a93,allOrNone:_0x140f4d,api:_0x2e8fac,operation:_0x456f7b,pollInterval:pollInterval=POOL_INTERVAL_CHEK_STATUS_BATCH}){const _0x47b261=_0xf95f87;super(_0x447f26,_0x126486,_0x557a93,_0x140f4d,_0x2e8fac),this[_0x47b261(0xc4)]=pollInterval,this[_0x47b261(0xe8)]=_0x456f7b;}[_0xf95f87(0xbe)](_0x358a1d){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x16ca02=_0xbee4;if(this[_0x16ca02(0xb3)]&&new Date()[_0x16ca02(0xbb)]()-this[_0x16ca02(0xb7)]<TIME_BULK_JOB_REMAIN_OPEN)return;yield this[_0x16ca02(0xc7)]();const _0x583958={'object':this[_0x16ca02(0xe4)],'externalIdFieldName':this[_0x16ca02(0xd4)],'contentType':_0x358a1d,'operation':this['operation']},_0x4e08bc={},{id:_0x484ad6,createdDate:_0x2e01e9}=yield bulk1_service_1['default'][_0x16ca02(0xbe)](this[_0x16ca02(0xc6)],_0x583958,_0x4e08bc,this[_0x16ca02(0xca)]);this['jobId']=_0x484ad6,this[_0x16ca02(0xb7)]=new Date(_0x2e01e9)[_0x16ca02(0xbb)]();});}[_0xf95f87(0xc7)](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x4e54d3=_0xbee4;if(!this[_0x4e54d3(0xb3)])return;return bulk1_service_1[_0x4e54d3(0xd5)][_0x4e54d3(0xba)](this['instance'],{},{'state':bulk1_enums_1[_0x4e54d3(0xc1)][_0x4e54d3(0xe0)]},this[_0x4e54d3(0xb3)],this['api']);});}[_0xf95f87(0xd6)](_0x161577){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x5e7f46=_0xbee4,_0xc6aed=yield bulk1_service_1[_0x5e7f46(0xd5)][_0x5e7f46(0xce)](this[_0x5e7f46(0xc6)],{},this['jobId'],_0x161577,this[_0x5e7f46(0xca)]);switch(_0xc6aed[_0x5e7f46(0xcc)]){case bulk1_enums_1['Bulk1BatchState']['InProgress']:case bulk1_enums_1[_0x5e7f46(0xe1)][_0x5e7f46(0xc3)]:!test_utils_1['default'][_0x5e7f46(0xd9)]()&&(yield(0x0,promises_1['setTimeout'])(this['pollInterval']));return this[_0x5e7f46(0xd6)](_0x161577);case bulk1_enums_1['Bulk1BatchState']['Completed']:return _0xc6aed;case bulk1_enums_1[_0x5e7f46(0xe1)][_0x5e7f46(0xb5)]:throw new salesforce_error_class_1['default'](_0xc6aed['stateMessage']);}});}[_0xf95f87(0xcf)](_0x5c34ce){const _0x51ee49=_0xf95f87,_0x4223cc=(0x0,sync_1[_0x51ee49(0xcb)])(_0x5c34ce,{'columns':!![],'cast':this[_0x51ee49(0xd8)]});return _0x4223cc[_0x51ee49(0xd3)](_0x2154eb=>({'id':_0x2154eb['Id'],'success':_0x2154eb[_0x51ee49(0xdc)],'created':_0x2154eb[_0x51ee49(0xe6)],'error':_0x2154eb[_0x51ee49(0xd0)]}));}[_0xf95f87(0xd8)](_0x510302,{header:_0x246476,column:_0x1328b4}){const _0x55d363=_0xf95f87;if(_0x246476)return _0x510302;if(typeof _0x1328b4===_0x55d363(0xda)&&[_0x55d363(0xdc),_0x55d363(0xe6)][_0x55d363(0xdf)](_0x1328b4))return _0x510302===_0x55d363(0xc0);return _0x510302;}}exports['default']=BaseBulkv1DeployData;