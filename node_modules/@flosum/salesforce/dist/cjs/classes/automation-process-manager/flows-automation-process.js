'use strict';const _0x59fd3a=_0x1358;(function(_0x230738,_0x316bcc){const _0x4ea6c1=_0x1358,_0xec7ce0=_0x230738();while(!![]){try{const _0x13bcde=parseInt(_0x4ea6c1(0x89))/0x1+-parseInt(_0x4ea6c1(0xb1))/0x2+-parseInt(_0x4ea6c1(0x93))/0x3*(parseInt(_0x4ea6c1(0x95))/0x4)+-parseInt(_0x4ea6c1(0x9c))/0x5*(-parseInt(_0x4ea6c1(0x9a))/0x6)+-parseInt(_0x4ea6c1(0x9f))/0x7+parseInt(_0x4ea6c1(0x9b))/0x8*(parseInt(_0x4ea6c1(0xa5))/0x9)+parseInt(_0x4ea6c1(0x90))/0xa;if(_0x13bcde===_0x316bcc)break;else _0xec7ce0['push'](_0xec7ce0['shift']());}catch(_0x143bae){_0xec7ce0['push'](_0xec7ce0['shift']());}}}(_0x5ce4,0xdbd81));var __awaiter=this&&this[_0x59fd3a(0xac)]||function(_0x1c9e34,_0x74d0d1,_0x2a018d,_0x59198f){function _0x19c15c(_0x4f2550){return _0x4f2550 instanceof _0x2a018d?_0x4f2550:new _0x2a018d(function(_0x4b9f36){_0x4b9f36(_0x4f2550);});}return new(_0x2a018d||(_0x2a018d=Promise))(function(_0x2f5ad0,_0x1fff32){const _0xed6a74=_0x1358;function _0x527e00(_0x5d0cce){const _0x20df66=_0x1358;try{_0x3b3748(_0x59198f[_0x20df66(0xb5)](_0x5d0cce));}catch(_0x48bfca){_0x1fff32(_0x48bfca);}}function _0x8a1d12(_0x3beb06){const _0x31e2bc=_0x1358;try{_0x3b3748(_0x59198f[_0x31e2bc(0x96)](_0x3beb06));}catch(_0x5486c4){_0x1fff32(_0x5486c4);}}function _0x3b3748(_0x534436){const _0x3453c8=_0x1358;_0x534436['done']?_0x2f5ad0(_0x534436[_0x3453c8(0x8a)]):_0x19c15c(_0x534436[_0x3453c8(0x8a)])[_0x3453c8(0xad)](_0x527e00,_0x8a1d12);}_0x3b3748((_0x59198f=_0x59198f[_0xed6a74(0xa6)](_0x1c9e34,_0x74d0d1||[]))[_0xed6a74(0xb5)]());});},__importDefault=this&&this[_0x59fd3a(0x8d)]||function(_0x151523){const _0x51cc46=_0x59fd3a;return _0x151523&&_0x151523[_0x51cc46(0xb8)]?_0x151523:{'default':_0x151523};};function _0x1358(_0x2abd45,_0x2ffcb1){const _0x5ce428=_0x5ce4();return _0x1358=function(_0x13588e,_0x15d26e){_0x13588e=_0x13588e-0x82;let _0x3a3af2=_0x5ce428[_0x13588e];return _0x3a3af2;},_0x1358(_0x2abd45,_0x2ffcb1);}Object['defineProperty'](exports,_0x59fd3a(0xb8),{'value':!![]});const xml2js_1=__importDefault(require('xml2js')),base_automation_process_1=__importDefault(require(_0x59fd3a(0xa0))),__1=require('..'),FLOW_DEFINITION_METADATA_TYPE='FlowDefinition',FLOW_METADATA_TYPE=_0x59fd3a(0x9e),KEY_NAME=_0x59fd3a(0x87),FLOWS_FOLDER=_0x59fd3a(0xa4),FLOW_DEFINITIONS_FOLDER='flowDefinitions',INACTIVE_STATUS=0x0,AUTOLAUNCHED_FLOW_TYPE=_0x59fd3a(0xaf),PROCESS_BUILDER_FLOW_TYPE=_0x59fd3a(0x83),FLOW_OBJECT_NODE=_0x59fd3a(0xb9);class FlowsAutomationProcess extends base_automation_process_1['default']{['disable'](){var _0x1bafd4;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x5f55e5=_0x1358;for(const _0x440ee2 in this[_0x5f55e5(0x92)]['files']){if(!_0x440ee2[_0x5f55e5(0x8b)](FLOWS_FOLDER+'/')||this['sourceZip'][_0x5f55e5(0xb4)][_0x440ee2][_0x5f55e5(0x94)])continue;const _0x2846df=this['getDeveloperName'](_0x440ee2),_0x575cce=yield this[_0x5f55e5(0x92)][_0x5f55e5(0x99)](_0x440ee2)['async']('string'),_0x404b24=yield new xml2js_1[(_0x5f55e5(0x85))][(_0x5f55e5(0xa8))]({'explicitArray':![]})[_0x5f55e5(0xbb)](_0x575cce);if(_0x404b24['Flow'][_0x5f55e5(0x82)]===AUTOLAUNCHED_FLOW_TYPE&&((_0x1bafd4=_0x404b24[_0x5f55e5(0x9e)]['start'])===null||_0x1bafd4===void 0x0?void 0x0:_0x1bafd4[_0x5f55e5(0xae)])&&this[_0x5f55e5(0xa9)][_0x5f55e5(0x84)](_0x404b24[_0x5f55e5(0x9e)]['start'][_0x5f55e5(0x88)]))this[_0x5f55e5(0xa1)][_0x5f55e5(0x99)](_0x440ee2,_0x575cce),this['addToTargetManifest'](_0x2846df),yield this['setStatus'](INACTIVE_STATUS,_0x2846df);else{if(_0x404b24[_0x5f55e5(0x9e)][_0x5f55e5(0x82)]===PROCESS_BUILDER_FLOW_TYPE){const _0x25664e=_0x404b24[_0x5f55e5(0x9e)][_0x5f55e5(0xa3)],_0x4aec8e=_0x25664e['find'](_0x8390e4=>_0x8390e4[_0x5f55e5(0xa7)]===FLOW_OBJECT_NODE);(_0x4aec8e===null||_0x4aec8e===void 0x0?void 0x0:_0x4aec8e['value'])&&this[_0x5f55e5(0xa9)][_0x5f55e5(0x84)](_0x4aec8e['value']['stringValue'])&&(this[_0x5f55e5(0xa1)][_0x5f55e5(0x99)](_0x440ee2,_0x575cce),this[_0x5f55e5(0x97)](_0x2846df),yield this[_0x5f55e5(0x9d)](INACTIVE_STATUS,_0x2846df));}}}});}[_0x59fd3a(0x9d)](_0x22d759,_0x2c5932){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x18b47b=_0x1358,_0x296c1a=FLOW_DEFINITIONS_FOLDER+'/'+_0x2c5932+'.flowDefinition',_0x1b6047=yield this['sourceZip'][_0x18b47b(0x99)](_0x296c1a)['async']('string'),_0x12633a=yield new xml2js_1[(_0x18b47b(0x85))][(_0x18b47b(0xa8))]({'explicitArray':![]})[_0x18b47b(0xbb)](_0x1b6047);_0x12633a[_0x18b47b(0xb0)]['activeVersionNumber']=_0x22d759;const _0x13eee0=new xml2js_1['default'][(_0x18b47b(0x8c))]()[_0x18b47b(0x86)](_0x12633a);this[_0x18b47b(0xa1)]['file'](_0x296c1a,_0x13eee0);});}[_0x59fd3a(0x97)](_0x54266d){const _0x31166a=_0x59fd3a;this[_0x31166a(0xb3)](FLOW_METADATA_TYPE),this[_0x31166a(0xb3)](FLOW_DEFINITION_METADATA_TYPE),this[_0x31166a(0xba)][_0x31166a(0xab)](FLOW_METADATA_TYPE)[_0x31166a(0xa2)](_0x54266d),this['targetManifest'][_0x31166a(0xab)](FLOW_DEFINITION_METADATA_TYPE)[_0x31166a(0xa2)](_0x54266d);}[_0x59fd3a(0x98)](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x1937e0=_0x1358;if(!this['objects'][_0x1937e0(0xb7)])return[];const _0x4ff316=new __1['QueryBuilder']()['select'](_0x1937e0(0x87),_0x1937e0(0xaa))[_0x1937e0(0xbe)](_0x1937e0(0xb0))[_0x1937e0(0xb2)](_0x1937e0(0x8f))[_0x1937e0(0xbc)]('ActiveVersionId\x20!=\x20NULL')[_0x1937e0(0x91)](),_0x3ee5a1=yield this[_0x1937e0(0xb6)](_0x4ff316),_0x121460={'name':FLOW_DEFINITION_METADATA_TYPE,'members':[]},_0x2ac0e3={'name':FLOW_METADATA_TYPE,'members':[]};for(const _0x359544 of _0x3ee5a1){const _0x45ed22=_0x359544[KEY_NAME];_0x121460['members'][_0x1937e0(0x8e)](_0x45ed22),_0x2ac0e3[_0x1937e0(0xbd)][_0x1937e0(0x8e)](_0x45ed22);}return _0x121460[_0x1937e0(0xbd)]['length']?[_0x121460,_0x2ac0e3]:[];});}}exports[_0x59fd3a(0x85)]=FlowsAutomationProcess;function _0x5ce4(){const _0x1ac016=['parseStringPromise','andWhere','members','from','processType','Workflow','includes','default','buildObject','DeveloperName','object','471480XLJutg','value','startsWith','Builder','__importDefault','push','ManageableState\x20=\x20\x27unmanaged\x27','33802890oIOBXC','build','sourceZip','1905LMpeDQ','dir','11040jkobjC','throw','addToTargetManifest','getSourceManifest','file','120sojUGC','600snDWDL','42250ARFPtW','setStatus','Flow','5115733fDuilV','./base-automation-process','targetZip','add','processMetadataValues','flows','105633XPFOPH','apply','name','Parser','objects','NamespacePrefix','get','__awaiter','then','recordTriggerType','AutoLaunchedFlow','FlowDefinition','3034288KeEcTG','where','initTypeInTargetManifest','files','next','query','length','__esModule','ObjectType','targetManifest'];_0x5ce4=function(){return _0x1ac016;};return _0x5ce4();}