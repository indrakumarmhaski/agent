'use strict';const _0x3b12fe=_0x57b7;(function(_0x444338,_0x2847fc){const _0x243c00=_0x57b7,_0x1f38dd=_0x444338();while(!![]){try{const _0x58c9a6=-parseInt(_0x243c00(0x14f))/0x1*(-parseInt(_0x243c00(0x12e))/0x2)+-parseInt(_0x243c00(0x143))/0x3+-parseInt(_0x243c00(0x146))/0x4*(parseInt(_0x243c00(0x136))/0x5)+parseInt(_0x243c00(0x154))/0x6+parseInt(_0x243c00(0x139))/0x7+parseInt(_0x243c00(0x144))/0x8+parseInt(_0x243c00(0x151))/0x9*(-parseInt(_0x243c00(0x131))/0xa);if(_0x58c9a6===_0x2847fc)break;else _0x1f38dd['push'](_0x1f38dd['shift']());}catch(_0x5a109a){_0x1f38dd['push'](_0x1f38dd['shift']());}}}(_0x317c,0x2edf5));function _0x57b7(_0x58a772,_0x1c951b){const _0x317ccb=_0x317c();return _0x57b7=function(_0x57b766,_0x2b22d7){_0x57b766=_0x57b766-0x12e;let _0x41b30b=_0x317ccb[_0x57b766];return _0x41b30b;},_0x57b7(_0x58a772,_0x1c951b);}var __awaiter=this&&this['__awaiter']||function(_0x157b75,_0x2f52ef,_0x594c29,_0x466de0){function _0x323071(_0x1f8af4){return _0x1f8af4 instanceof _0x594c29?_0x1f8af4:new _0x594c29(function(_0x4915a5){_0x4915a5(_0x1f8af4);});}return new(_0x594c29||(_0x594c29=Promise))(function(_0x2c3437,_0x22ca2d){const _0x1130ec=_0x57b7;function _0x1da8b0(_0x41f1f9){const _0xcf054f=_0x57b7;try{_0x13c81d(_0x466de0[_0xcf054f(0x140)](_0x41f1f9));}catch(_0x104b61){_0x22ca2d(_0x104b61);}}function _0x178532(_0x17d6e0){const _0x1981d1=_0x57b7;try{_0x13c81d(_0x466de0[_0x1981d1(0x158)](_0x17d6e0));}catch(_0x43e000){_0x22ca2d(_0x43e000);}}function _0x13c81d(_0x19e65d){const _0x4f6e52=_0x57b7;_0x19e65d[_0x4f6e52(0x15d)]?_0x2c3437(_0x19e65d[_0x4f6e52(0x15a)]):_0x323071(_0x19e65d[_0x4f6e52(0x15a)])[_0x4f6e52(0x134)](_0x1da8b0,_0x178532);}_0x13c81d((_0x466de0=_0x466de0['apply'](_0x157b75,_0x2f52ef||[]))[_0x1130ec(0x140)]());});},__importDefault=this&&this[_0x3b12fe(0x147)]||function(_0x1b00f5){const _0x2a385d=_0x3b12fe;return _0x1b00f5&&_0x1b00f5[_0x2a385d(0x13a)]?_0x1b00f5:{'default':_0x1b00f5};};Object['defineProperty'](exports,_0x3b12fe(0x13a),{'value':!![]});function _0x317c(){const _0x507b4e=['instance','64395CeHTXe','2046672LJIeTz','getSourceManifest','341548idAiXR','__importDefault','zipFile','automationProcesses','base64','retrieveMetadata','./triggers-automation-process','deployMetadata','_base64Source','2oLyvIW','jszip','9nZUFIZ','../../utils/package-xml.utils','execute','1788174JMPjBp','saveSourceMetadataBackup','./flows-automation-process','package.xml','throw','../../commands/soap/deploy-soap-compose','value','_sourceZip','length','done','../../commands/soap/retrieve-soap.compose','148186yoJdHI','loadAsync','_base64Target','2407210yhnKaZ','enable','disable','then','default','15BHeqcA','_isDisabled','assign','58009gOTljx','__esModule','../../constants/salesforce.constants','_targetZip','getTargetManifest','generateXml','validate','next','generateBase64Target'];_0x317c=function(){return _0x507b4e;};return _0x317c();}const workflows_automation_process_1=__importDefault(require('./workflows-automation-process')),triggers_automation_process_1=__importDefault(require(_0x3b12fe(0x14c))),validation_rules_automation_process_1=__importDefault(require('./validation-rules-automation-process')),flows_automation_process_1=__importDefault(require(_0x3b12fe(0x156))),salesforce_constants_1=__importDefault(require(_0x3b12fe(0x13b))),retrieve_soap_compose_1=__importDefault(require(_0x3b12fe(0x15e))),jszip_1=__importDefault(require(_0x3b12fe(0x150))),deploy_soap_compose_1=__importDefault(require(_0x3b12fe(0x159))),package_xml_utils_1=__importDefault(require(_0x3b12fe(0x152))),lookup_filters_process_1=__importDefault(require('./lookup-filters-process')),BASE_DEPLOY_OPTIONS={'singlePackage':!![],'rollbackOnError':!![]},PACKAGE_XML_NAME=_0x3b12fe(0x157);class ManagerAutomationProcess{constructor({instance:_0x32166c,saveSourceMetadataBackup:_0x4060f3,triggersObjects:_0xeb53ba,validationRulesObjects:_0xec32c5,workflowsObjects:_0x364d03,processBuilderObjects:_0x99ca5f,lookupFiltersObjects:_0x452f26}){const _0x18d5c8=_0x3b12fe;this[_0x18d5c8(0x15b)]=new jszip_1['default'](),this['_targetZip']=new jszip_1[(_0x18d5c8(0x135))](),this['_isDisabled']=![],this['instance']=_0x32166c,this[_0x18d5c8(0x155)]=_0x4060f3;const _0xb75fd2=new triggers_automation_process_1['default'](this[_0x18d5c8(0x142)],_0xeb53ba,this[_0x18d5c8(0x15b)],this[_0x18d5c8(0x13c)]),_0x224b25=new workflows_automation_process_1[(_0x18d5c8(0x135))](this[_0x18d5c8(0x142)],_0x364d03,this[_0x18d5c8(0x15b)],this[_0x18d5c8(0x13c)]),_0xa9dfc4=new validation_rules_automation_process_1[(_0x18d5c8(0x135))](this[_0x18d5c8(0x142)],_0xec32c5,this['_sourceZip'],this[_0x18d5c8(0x13c)]),_0x1f88d8=new flows_automation_process_1[(_0x18d5c8(0x135))](this['instance'],_0x99ca5f,this[_0x18d5c8(0x15b)],this[_0x18d5c8(0x13c)]),_0x3f0f13=new lookup_filters_process_1[(_0x18d5c8(0x135))](this[_0x18d5c8(0x142)],_0x452f26,this[_0x18d5c8(0x15b)],this['_targetZip']);this[_0x18d5c8(0x149)]=[_0xb75fd2,_0x224b25,_0xa9dfc4,_0x1f88d8,_0x3f0f13];}[_0x3b12fe(0x13d)](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x4d70bd=_0x57b7;let _0x436cd3=[];for(const _0x5ab05f of this[_0x4d70bd(0x149)]){const _0x180ae2=yield _0x5ab05f['getTargetManifest']();_0x436cd3=[..._0x436cd3,..._0x180ae2];}return _0x436cd3;});}[_0x3b12fe(0x145)](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x17e2b7=_0x57b7;let _0x3b3357=[];for(const _0x444252 of this['automationProcesses']){const _0x46d0c5=yield _0x444252[_0x17e2b7(0x145)]();_0x3b3357=[..._0x3b3357,..._0x46d0c5];}return _0x3b3357;});}[_0x3b12fe(0x141)](_0x21e5df){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x545b0e=_0x57b7;for(const _0x10316b of this['automationProcesses']){yield _0x10316b['disable']();}const _0x240b33=yield this[_0x545b0e(0x13d)](),_0x32f607=package_xml_utils_1[_0x545b0e(0x135)][_0x545b0e(0x13e)](_0x240b33);return _0x21e5df['file'](PACKAGE_XML_NAME,_0x32f607),_0x21e5df['generateAsync']({'type':_0x545b0e(0x14a)});});}[_0x3b12fe(0x132)](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x4d8efc=_0x57b7;if(!this[_0x4d8efc(0x137)])return;yield this['deployMetadata'](this[_0x4d8efc(0x14e)],![]),this[_0x4d8efc(0x137)]=![];});}[_0x3b12fe(0x133)](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0xdc20fa=_0x57b7,_0x38b109=yield this[_0xdc20fa(0x145)]();if(!_0x38b109[_0xdc20fa(0x15c)])return;this[_0xdc20fa(0x14e)]=yield this[_0xdc20fa(0x14b)](_0x38b109),yield this[_0xdc20fa(0x15b)][_0xdc20fa(0x12f)](this[_0xdc20fa(0x14e)],{'base64':!![]}),this[_0xdc20fa(0x155)]&&(yield this['saveSourceMetadataBackup'](this[_0xdc20fa(0x14e)])),this[_0xdc20fa(0x130)]=yield this[_0xdc20fa(0x141)](this[_0xdc20fa(0x13c)]),yield this[_0xdc20fa(0x13f)](),yield this[_0xdc20fa(0x14d)](this[_0xdc20fa(0x130)],![]),this['_isDisabled']=!![];});}['validate'](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x5055aa=_0x57b7;yield this[_0x5055aa(0x14d)](this[_0x5055aa(0x130)],!![]),yield this['deployMetadata'](this['_base64Source'],!![]);});}[_0x3b12fe(0x14b)](_0x2dfa99){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x3dcc3c=_0x57b7,_0x1b8c05=new retrieve_soap_compose_1[(_0x3dcc3c(0x135))](salesforce_constants_1[_0x3dcc3c(0x135)]['API'],this['instance'],_0x2dfa99),_0x37ec9f=yield _0x1b8c05['execute']();return _0x37ec9f[_0x3dcc3c(0x148)];});}[_0x3b12fe(0x14d)](_0x5468d3,_0x1d6f2e){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x3fbc48=_0x57b7,_0x2c672f=new deploy_soap_compose_1[(_0x3fbc48(0x135))](this[_0x3fbc48(0x142)],_0x5468d3,Object[_0x3fbc48(0x138)](Object[_0x3fbc48(0x138)]({},BASE_DEPLOY_OPTIONS),{'checkOnly':_0x1d6f2e}));yield _0x2c672f[_0x3fbc48(0x153)]();});}}exports[_0x3b12fe(0x135)]=ManagerAutomationProcess;