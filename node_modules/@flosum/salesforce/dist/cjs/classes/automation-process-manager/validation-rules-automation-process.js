'use strict';const _0x4c2c55=_0x3ddf;function _0xb467(){const _0x2853c5=['disable','EntityDefinition.QualifiedApiName','startsWith','then','file','QueryBuilder','setStatus','138kGEaXu','objects','add','defineProperty','join','isArray','initTypeInTargetManifest','next','320747vkzGJr','done','dir','__importDefault','value','6WeLXbW','ValidationRule','NamespacePrefix','1428JMIfaF','andWhere','Parser','addToTargetManifest','where','async','Active','members','build','files','./base-automation-process','targetZip','fullName','EntityDefinition.QualifiedApiName\x20IN\x20(\x27','447058ITDAVk','parseStringPromise','push','sourceZip','__awaiter','EntityDefinition','QualifiedApiName','145MJHSNk','default','throw','2375848pMjNvY','buildObject','110904NxdHwe','length','__esModule','apply','220953lFNBTi','105320csgTay','select','from','ValidationName','17809dnCVlx','\x27,\x27','828GTzmmo','get','Builder'];_0xb467=function(){return _0x2853c5;};return _0xb467();}(function(_0x56f36b,_0x1993e8){const _0x343663=_0x3ddf,_0x412f5f=_0x56f36b();while(!![]){try{const _0x12ac42=-parseInt(_0x343663(0x153))/0x1+-parseInt(_0x343663(0x142))/0x2*(-parseInt(_0x343663(0x163))/0x3)+-parseInt(_0x343663(0x15f))/0x4*(-parseInt(_0x343663(0x15a))/0x5)+parseInt(_0x343663(0x135))/0x6*(-parseInt(_0x343663(0x13d))/0x7)+parseInt(_0x343663(0x15d))/0x8+-parseInt(_0x343663(0x16a))/0x9*(-parseInt(_0x343663(0x164))/0xa)+parseInt(_0x343663(0x168))/0xb*(-parseInt(_0x343663(0x145))/0xc);if(_0x12ac42===_0x1993e8)break;else _0x412f5f['push'](_0x412f5f['shift']());}catch(_0x9fbf2b){_0x412f5f['push'](_0x412f5f['shift']());}}}(_0xb467,0x91d52));var __awaiter=this&&this[_0x4c2c55(0x157)]||function(_0x562813,_0x2f0e29,_0x33f4c7,_0x418473){function _0x443057(_0x590214){return _0x590214 instanceof _0x33f4c7?_0x590214:new _0x33f4c7(function(_0x1cb8ce){_0x1cb8ce(_0x590214);});}return new(_0x33f4c7||(_0x33f4c7=Promise))(function(_0x2c2bbd,_0x5f3c8e){const _0x1add07=_0x3ddf;function _0x3c5624(_0x19ddd1){try{_0x3469af(_0x418473['next'](_0x19ddd1));}catch(_0x1f9f2b){_0x5f3c8e(_0x1f9f2b);}}function _0x3cfb61(_0x4bbc20){const _0x5e661b=_0x3ddf;try{_0x3469af(_0x418473[_0x5e661b(0x15c)](_0x4bbc20));}catch(_0x1a784f){_0x5f3c8e(_0x1a784f);}}function _0x3469af(_0x280565){const _0x1886cd=_0x3ddf;_0x280565[_0x1886cd(0x13e)]?_0x2c2bbd(_0x280565[_0x1886cd(0x141)]):_0x443057(_0x280565['value'])[_0x1886cd(0x131)](_0x3c5624,_0x3cfb61);}_0x3469af((_0x418473=_0x418473[_0x1add07(0x162)](_0x562813,_0x2f0e29||[]))[_0x1add07(0x13c)]());});},__importDefault=this&&this[_0x4c2c55(0x140)]||function(_0x3efd20){const _0x22f634=_0x4c2c55;return _0x3efd20&&_0x3efd20[_0x22f634(0x161)]?_0x3efd20:{'default':_0x3efd20};};Object[_0x4c2c55(0x138)](exports,_0x4c2c55(0x161),{'value':!![]});function _0x3ddf(_0x20f1b4,_0x522789){const _0xb467c7=_0xb467();return _0x3ddf=function(_0x3ddf78,_0x5b7cbe){_0x3ddf78=_0x3ddf78-0x131;let _0x2ffaba=_0xb467c7[_0x3ddf78];return _0x2ffaba;},_0x3ddf(_0x20f1b4,_0x522789);}const xml2js_1=__importDefault(require('xml2js')),base_automation_process_1=__importDefault(require(_0x4c2c55(0x14f))),__1=require('..'),VALIDATION_RULE_METADATA_TYPE=_0x4c2c55(0x143),OBJECTS_FOLDER=_0x4c2c55(0x136),KEY_NAME=_0x4c2c55(0x167),INACTIVE_STATUS=![];class ValidationRulesAutomationProcess extends base_automation_process_1[_0x4c2c55(0x15b)]{[_0x4c2c55(0x16d)](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x363c3e=_0x3ddf;yield this[_0x363c3e(0x134)](INACTIVE_STATUS);});}[_0x4c2c55(0x134)](_0x46eee7){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x14e045=_0x3ddf;for(const _0x2728bf in this[_0x14e045(0x156)][_0x14e045(0x14e)]){if(!_0x2728bf[_0x14e045(0x16f)](OBJECTS_FOLDER+'/')||this[_0x14e045(0x156)][_0x14e045(0x14e)][_0x2728bf][_0x14e045(0x13f)])continue;const _0x3361e1=yield this[_0x14e045(0x156)]['file'](_0x2728bf)[_0x14e045(0x14a)]('string'),_0x5e1dfc=yield new xml2js_1[(_0x14e045(0x15b))][(_0x14e045(0x147))]({'explicitArray':![]})[_0x14e045(0x154)](_0x3361e1);let _0x1c6f6a=_0x5e1dfc['CustomObject']['validationRules'];if(!_0x1c6f6a)continue;const _0x578f79=Array[_0x14e045(0x13a)](_0x1c6f6a)?_0x1c6f6a:[_0x1c6f6a];for(const _0x464b07 of _0x578f79){_0x464b07['active']=_0x46eee7,this[_0x14e045(0x148)](_0x2728bf,_0x464b07[_0x14e045(0x151)]);}const _0x1d9d5d=new xml2js_1[(_0x14e045(0x15b))][(_0x14e045(0x16c))]()[_0x14e045(0x15e)](_0x5e1dfc);this[_0x14e045(0x150)][_0x14e045(0x132)](_0x2728bf,_0x1d9d5d);}});}[_0x4c2c55(0x148)](_0x160cf9,_0x565054){const _0x12436d=_0x4c2c55;this[_0x12436d(0x13b)](VALIDATION_RULE_METADATA_TYPE),this['targetManifest'][_0x12436d(0x16b)](VALIDATION_RULE_METADATA_TYPE)[_0x12436d(0x137)](this['getDeveloperName'](_0x160cf9)+'.'+_0x565054);}['getSourceManifest'](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x5b2ae1=_0x3ddf;if(!this[_0x5b2ae1(0x136)][_0x5b2ae1(0x160)])return[];const _0x5198e0=new __1[(_0x5b2ae1(0x133))]()[_0x5b2ae1(0x165)](_0x5b2ae1(0x14b),_0x5b2ae1(0x167),_0x5b2ae1(0x144),_0x5b2ae1(0x16e))[_0x5b2ae1(0x166)](_0x5b2ae1(0x143))[_0x5b2ae1(0x149)]('ManageableState\x20=\x20\x27unmanaged\x27')[_0x5b2ae1(0x146)]('Active\x20=\x20TRUE')[_0x5b2ae1(0x146)](_0x5b2ae1(0x152)+this[_0x5b2ae1(0x136)][_0x5b2ae1(0x139)](_0x5b2ae1(0x169))+'\x27)')[_0x5b2ae1(0x14d)](),_0x3f23d3=yield this['query'](_0x5198e0),_0x50f441={'name':VALIDATION_RULE_METADATA_TYPE,'members':[]};for(const _0x1aa0e7 of _0x3f23d3){_0x50f441[_0x5b2ae1(0x14c)][_0x5b2ae1(0x155)](_0x1aa0e7[_0x5b2ae1(0x158)][_0x5b2ae1(0x159)]+'.'+_0x1aa0e7[KEY_NAME]);}return _0x50f441[_0x5b2ae1(0x14c)][_0x5b2ae1(0x160)]?[_0x50f441]:[];});}}exports['default']=ValidationRulesAutomationProcess;