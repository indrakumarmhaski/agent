'use strict';function _0x46ed(){const _0x27cafc=['READ_METADATA_TYPES','push','ArrayUtils','runRetrieveMetadata','length','has','_promises','throw','handleItem','66fRInvt','__awaiter','../../../utils/array.utils','539655HUYvTd','splitListMetadataItems','isFullParents','then','_axiosInstance','listMetadataItem','defineProperty','../handlers/metadata-handler-factory','next','6053FEGgwS','splitOnChunks','8104890dbvsnW','BUNDLE_TYPES','411480VqzKDx','retrieve','reason','runReadMetadata','__esModule','launchRetrieveMetadata','./read.retriever','_apiVersion','20GDEnwH','execute','all','value','read','_warnings','../../../constants/metadata.constants','done','message','_describe','16onmtND','main','components','code','handleRetrieveResults','_items','__importDefault','type','343406uFwQeW','./default.retriever','default','HANDLE_ERRORS','426573fkPrvn','warnings','launchReadMetadata','create','countFiles','toLowerCase','1593664HycouM'];_0x46ed=function(){return _0x27cafc;};return _0x46ed();}const _0x7ee6a0=_0xe63d;(function(_0x4169b1,_0x4682ee){const _0x181718=_0xe63d,_0x18cef4=_0x4169b1();while(!![]){try{const _0x9301d=-parseInt(_0x181718(0x1d6))/0x1*(-parseInt(_0x181718(0x1e2))/0x2)+-parseInt(_0x181718(0x1da))/0x3+-parseInt(_0x181718(0x1ec))/0x4*(-parseInt(_0x181718(0x1cd))/0x5)+-parseInt(_0x181718(0x1ca))/0x6*(parseInt(_0x181718(0x1f4))/0x7)+-parseInt(_0x181718(0x1c0))/0x8+parseInt(_0x181718(0x1ba))/0x9+parseInt(_0x181718(0x1d8))/0xa;if(_0x9301d===_0x4682ee)break;else _0x18cef4['push'](_0x18cef4['shift']());}catch(_0x24ee17){_0x18cef4['push'](_0x18cef4['shift']());}}}(_0x46ed,0x73c16));function _0xe63d(_0x130e1a,_0x435f34){const _0x46ed64=_0x46ed();return _0xe63d=function(_0xe63dec,_0x5084f4){_0xe63dec=_0xe63dec-0x1ba;let _0x4749a7=_0x46ed64[_0xe63dec];return _0x4749a7;},_0xe63d(_0x130e1a,_0x435f34);}var __awaiter=this&&this[_0x7ee6a0(0x1cb)]||function(_0x472e20,_0x449d6a,_0x3154ee,_0x50cc45){function _0x4eb287(_0x1967ac){return _0x1967ac instanceof _0x3154ee?_0x1967ac:new _0x3154ee(function(_0x20622f){_0x20622f(_0x1967ac);});}return new(_0x3154ee||(_0x3154ee=Promise))(function(_0xebb5fb,_0x43605d){const _0x219fee=_0xe63d;function _0x3492c4(_0x567e84){const _0x48fe9c=_0xe63d;try{_0x2a65f4(_0x50cc45[_0x48fe9c(0x1d5)](_0x567e84));}catch(_0x1bb275){_0x43605d(_0x1bb275);}}function _0x4aaa33(_0x302c4c){const _0x4fb437=_0xe63d;try{_0x2a65f4(_0x50cc45[_0x4fb437(0x1c8)](_0x302c4c));}catch(_0x3c3ce0){_0x43605d(_0x3c3ce0);}}function _0x2a65f4(_0x565b78){const _0x257e59=_0xe63d;_0x565b78[_0x257e59(0x1e9)]?_0xebb5fb(_0x565b78[_0x257e59(0x1e5)]):_0x4eb287(_0x565b78[_0x257e59(0x1e5)])[_0x257e59(0x1d0)](_0x3492c4,_0x4aaa33);}_0x2a65f4((_0x50cc45=_0x50cc45['apply'](_0x472e20,_0x449d6a||[]))[_0x219fee(0x1d5)]());});},__importDefault=this&&this[_0x7ee6a0(0x1f2)]||function(_0x552e5d){const _0x42c462=_0x7ee6a0;return _0x552e5d&&_0x552e5d[_0x42c462(0x1de)]?_0x552e5d:{'default':_0x552e5d};};Object[_0x7ee6a0(0x1d3)](exports,_0x7ee6a0(0x1de),{'value':!![]});const read_retriever_1=__importDefault(require(_0x7ee6a0(0x1e0))),metadata_constants_1=__importDefault(require(_0x7ee6a0(0x1e8))),default_retriever_1=__importDefault(require(_0x7ee6a0(0x1f5))),metadata_handler_factory_1=__importDefault(require(_0x7ee6a0(0x1d4))),array_utils_1=require(_0x7ee6a0(0x1cc));class RetrieverManager{constructor(_0x307913,_0x404688,_0x58f025,_0x1dea0a){const _0x51e59c=_0x7ee6a0;this[_0x51e59c(0x1e1)]=_0x307913,this['_axiosInstance']=_0x404688,this[_0x51e59c(0x1eb)]=_0x58f025,this[_0x51e59c(0x1cf)]=_0x1dea0a,this['_items']={},this[_0x51e59c(0x1e7)]=[],this[_0x51e59c(0x1c7)]=[];}static[_0x7ee6a0(0x1ce)](_0xb14ed1){const _0x520647=_0x7ee6a0,_0x5453c5={'read':[],'retrieve':[]};for(const _0x5c908b of _0xb14ed1){if(_0x5c908b[_0x520647(0x1ed)]&&metadata_constants_1[_0x520647(0x1f6)][_0x520647(0x1c1)][_0x520647(0x1c6)](_0x5c908b[_0x520647(0x1ed)][_0x520647(0x1d2)][_0x520647(0x1f3)])){_0x5453c5[_0x520647(0x1e6)][_0x520647(0x1c2)](_0x5c908b);continue;}_0x5453c5[_0x520647(0x1db)][_0x520647(0x1c2)](_0x5c908b);}return _0x5453c5;}[_0x7ee6a0(0x1be)]({main:_0x3556ad,child:_0x1e2731}){const _0xbe5912=_0x7ee6a0;if(!_0x3556ad&&_0x1e2731)return 0x1;if(metadata_constants_1[_0xbe5912(0x1f6)][_0xbe5912(0x1d9)]['has'](_0x3556ad[_0xbe5912(0x1d2)][_0xbe5912(0x1f3)]))return 0x4;if(this[_0xbe5912(0x1eb)][_0x3556ad[_0xbe5912(0x1d2)][_0xbe5912(0x1f3)][_0xbe5912(0x1bf)]()])return 0x2;return 0x1;}[_0x7ee6a0(0x1df)](_0xa9baa0){const _0x348090=_0x7ee6a0;let _0x31d156=[],_0x46338e=0x0;for(const _0x14dca0 of _0xa9baa0){const _0x20cbd4=this[_0x348090(0x1be)](_0x14dca0);_0x46338e+_0x20cbd4>metadata_constants_1[_0x348090(0x1f6)]['RETRIEVE_FILES_LIMIT']&&(this['_promises'][_0x348090(0x1c2)](this[_0x348090(0x1c4)](_0x31d156)),_0x46338e=0x0,_0x31d156=[]),_0x31d156[_0x348090(0x1c2)](_0x14dca0),_0x46338e+=_0x20cbd4;}_0x31d156[_0x348090(0x1c5)]&&this[_0x348090(0x1c7)]['push'](this[_0x348090(0x1c4)](_0x31d156));}['launchReadMetadata'](_0x1102ed){const _0x24e418=_0x7ee6a0;_0x1102ed[_0x24e418(0x1c5)]&&this[_0x24e418(0x1c7)]['push'](this['runReadMetadata'](_0x1102ed));}[_0x7ee6a0(0x1dd)](_0x14ead6){const _0x207edd=_0x7ee6a0;return new read_retriever_1['default'](this[_0x207edd(0x1e1)],this[_0x207edd(0x1d1)],_0x14ead6,this['_describe'])['execute']()[_0x207edd(0x1d0)](_0x4f6604=>this[_0x207edd(0x1f0)](_0x4f6604,_0x14ead6));}['runRetrieveMetadata'](_0x1ba82f){var _0x7584b3;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x4e06d7=_0xe63d;try{const _0x843dfc=yield new default_retriever_1[(_0x4e06d7(0x1f6))](this[_0x4e06d7(0x1e1)],this[_0x4e06d7(0x1d1)],_0x1ba82f,this[_0x4e06d7(0x1eb)])[_0x4e06d7(0x1e3)]();yield this[_0x4e06d7(0x1f0)](_0x843dfc,_0x1ba82f);}catch(_0x23c1f2){if(_0x1ba82f['length']>0x1&&metadata_constants_1[_0x4e06d7(0x1f6)][_0x4e06d7(0x1f7)]['has'](((_0x7584b3=_0x23c1f2[_0x4e06d7(0x1dc)])===null||_0x7584b3===void 0x0?void 0x0:_0x7584b3[_0x4e06d7(0x1ef)])||_0x23c1f2[_0x4e06d7(0x1ef)])){const [_0x4c1efb,_0x4e2264]=array_utils_1[_0x4e06d7(0x1c3)][_0x4e06d7(0x1d7)](_0x1ba82f,_0x1ba82f[_0x4e06d7(0x1c5)]/0x2);yield Promise[_0x4e06d7(0x1e4)]([this['runRetrieveMetadata'](_0x4c1efb),this[_0x4e06d7(0x1c4)](_0x4e2264)]);}else throw new Error(_0x23c1f2['reason']||_0x23c1f2[_0x4e06d7(0x1ea)]);}});}[_0x7ee6a0(0x1f0)](_0x30fd92,_0x106c6c){var _0x3b90e7;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x51bd61=_0xe63d;for(const {main:_0x1eba0a,child:_0x446b2d}of _0x106c6c){if(_0x446b2d===null||_0x446b2d===void 0x0?void 0x0:_0x446b2d[_0x51bd61(0x1c5)])for(const _0x4b9839 of _0x446b2d){yield this[_0x51bd61(0x1c9)](_0x30fd92,_0x4b9839[_0x51bd61(0x1d2)]);}_0x1eba0a&&(yield this[_0x51bd61(0x1c9)](_0x30fd92,_0x1eba0a[_0x51bd61(0x1d2)]));}((_0x3b90e7=_0x30fd92[_0x51bd61(0x1bb)])===null||_0x3b90e7===void 0x0?void 0x0:_0x3b90e7[_0x51bd61(0x1c5)])&&this[_0x51bd61(0x1e7)][_0x51bd61(0x1c2)](..._0x30fd92['warnings']);});}['handleItem'](_0x53788d,_0xefcb9e){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x308c35=_0xe63d,_0x96c575=yield metadata_handler_factory_1[_0x308c35(0x1f6)][_0x308c35(0x1bd)](_0xefcb9e[_0x308c35(0x1f3)],this[_0x308c35(0x1eb)],_0xefcb9e,_0x53788d['files'],this[_0x308c35(0x1cf)])[_0x308c35(0x1e3)]();if(!_0x96c575)return;const {type:_0x59f5a1}=_0x96c575['listMetadataItem'];if(!this[_0x308c35(0x1f1)][_0x59f5a1]){const _0x370688=_0x59f5a1[_0x308c35(0x1bf)]();this[_0x308c35(0x1f1)][_0x59f5a1]=Object['assign'](Object['assign']({},this[_0x308c35(0x1eb)][_0x370688]),{'components':[]});}this[_0x308c35(0x1f1)][_0x59f5a1][_0x308c35(0x1ee)]['push'](_0x96c575);});}['execute'](_0x1fa0f1){return __awaiter(this,void 0x0,void 0x0,function*(){const _0xeb711a=_0xe63d,{read:_0x181bbc,retrieve:_0x3b327a}=RetrieverManager[_0xeb711a(0x1ce)](_0x1fa0f1);return this[_0xeb711a(0x1df)](_0x3b327a),this[_0xeb711a(0x1bc)](_0x181bbc),yield Promise['all'](this[_0xeb711a(0x1c7)]),{'items':this[_0xeb711a(0x1f1)],'warnings':this['_warnings']};});}}exports[_0x7ee6a0(0x1f6)]=RetrieverManager;