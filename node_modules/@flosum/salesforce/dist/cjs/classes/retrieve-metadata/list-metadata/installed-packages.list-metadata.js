'use strict';var _0x4d5a68=_0x1ddb;function _0x33ff(){var _0x27725=['call','build','execute','defineProperty','value','2okHvYU','1981535fXfhdr','propertyIsEnumerable','1478671iEoaPo','__awaiter','map','next','getOwnPropertySymbols','13978344SgCaTm','Id\x20IN\x20(:ids)','xmlName','QueryService','31360bjptvo','then','describeItem','indexOf','getInstalledSubscriberPackages','apply','filter','prototype','apiVersion','length','15777NySAYY','10497606oqmoes','__esModule','where','4MocqHv','__importDefault','1958619gtnIQL','10356834TqeGeD','../..','done','hasOwnProperty'];_0x33ff=function(){return _0x27725;};return _0x33ff();}(function(_0x23e516,_0x17dfd1){var _0x313c8b=_0x1ddb,_0x5cd1e8=_0x23e516();while(!![]){try{var _0x6ff28b=parseInt(_0x313c8b(0x9b))/0x1+parseInt(_0x313c8b(0x98))/0x2*(-parseInt(_0x313c8b(0x8e))/0x3)+parseInt(_0x313c8b(0x8c))/0x4*(-parseInt(_0x313c8b(0x99))/0x5)+-parseInt(_0x313c8b(0x8f))/0x6+-parseInt(_0x313c8b(0x89))/0x7+-parseInt(_0x313c8b(0xa0))/0x8+-parseInt(_0x313c8b(0x88))/0x9*(-parseInt(_0x313c8b(0x7e))/0xa);if(_0x6ff28b===_0x17dfd1)break;else _0x5cd1e8['push'](_0x5cd1e8['shift']());}catch(_0x4fb109){_0x5cd1e8['push'](_0x5cd1e8['shift']());}}}(_0x33ff,0xe8dd1));function _0x1ddb(_0x17b8ba,_0x109358){var _0x33ff03=_0x33ff();return _0x1ddb=function(_0x1ddbb4,_0x20e807){_0x1ddbb4=_0x1ddbb4-0x7d;var _0x552f9c=_0x33ff03[_0x1ddbb4];return _0x552f9c;},_0x1ddb(_0x17b8ba,_0x109358);}var __awaiter=this&&this[_0x4d5a68(0x9c)]||function(_0x1073f3,_0x5a18de,_0x35c5f7,_0x25ca1d){function _0x3b5b86(_0x3dcfbb){return _0x3dcfbb instanceof _0x35c5f7?_0x3dcfbb:new _0x35c5f7(function(_0x5dff5e){_0x5dff5e(_0x3dcfbb);});}return new(_0x35c5f7||(_0x35c5f7=Promise))(function(_0x14662b,_0x46c081){var _0x244cf2=_0x1ddb;function _0x23f1d1(_0x220961){var _0x920a26=_0x1ddb;try{_0x1e15ad(_0x25ca1d[_0x920a26(0x9e)](_0x220961));}catch(_0x2f960e){_0x46c081(_0x2f960e);}}function _0x3caad5(_0x5ac556){try{_0x1e15ad(_0x25ca1d['throw'](_0x5ac556));}catch(_0x143c9d){_0x46c081(_0x143c9d);}}function _0x1e15ad(_0x5e28ce){var _0x15a717=_0x1ddb;_0x5e28ce[_0x15a717(0x91)]?_0x14662b(_0x5e28ce[_0x15a717(0x97)]):_0x3b5b86(_0x5e28ce[_0x15a717(0x97)])[_0x15a717(0x7f)](_0x23f1d1,_0x3caad5);}_0x1e15ad((_0x25ca1d=_0x25ca1d[_0x244cf2(0x83)](_0x1073f3,_0x5a18de||[]))[_0x244cf2(0x9e)]());});},__rest=this&&this['__rest']||function(_0x1311d0,_0x5b6240){var _0x4dfde7=_0x4d5a68,_0x567937={};for(var _0xc7c71d in _0x1311d0)if(Object['prototype'][_0x4dfde7(0x92)][_0x4dfde7(0x93)](_0x1311d0,_0xc7c71d)&&_0x5b6240[_0x4dfde7(0x81)](_0xc7c71d)<0x0)_0x567937[_0xc7c71d]=_0x1311d0[_0xc7c71d];if(_0x1311d0!=null&&typeof Object['getOwnPropertySymbols']==='function')for(var _0x5281d8=0x0,_0xc7c71d=Object[_0x4dfde7(0x9f)](_0x1311d0);_0x5281d8<_0xc7c71d[_0x4dfde7(0x87)];_0x5281d8++){if(_0x5b6240[_0x4dfde7(0x81)](_0xc7c71d[_0x5281d8])<0x0&&Object[_0x4dfde7(0x85)][_0x4dfde7(0x9a)][_0x4dfde7(0x93)](_0x1311d0,_0xc7c71d[_0x5281d8]))_0x567937[_0xc7c71d[_0x5281d8]]=_0x1311d0[_0xc7c71d[_0x5281d8]];}return _0x567937;},__importDefault=this&&this[_0x4d5a68(0x8d)]||function(_0x169bb9){var _0x1a3e6f=_0x4d5a68;return _0x169bb9&&_0x169bb9[_0x1a3e6f(0x8a)]?_0x169bb9:{'default':_0x169bb9};};Object[_0x4d5a68(0x96)](exports,_0x4d5a68(0x8a),{'value':!![]});const services_1=require('../../../services'),base_list_metadata_1=__importDefault(require('./base.list-metadata')),__1=require(_0x4d5a68(0x90));class InstalledPackagesListMetadata extends base_list_metadata_1['default']{constructor(_0x21e72d){var _0x315598=_0x4d5a68,{describeItem:_0x5d0cab}=_0x21e72d,_0x42e221=__rest(_0x21e72d,[_0x315598(0x80)]);super(_0x42e221),this[_0x315598(0x80)]=_0x5d0cab;}['getInstalledSubscriberPackages'](_0x45d7d3){return __awaiter(this,void 0x0,void 0x0,function*(){var _0x49ba75=_0x1ddb;const _0x187510=new __1['QueryBuilder']()['select']('Id')['from']('InstalledSubscriberPackage\x20')[_0x49ba75(0x8b)](_0x49ba75(0xa1),{'ids':_0x45d7d3})[_0x49ba75(0x94)](),{records:_0x119553}=yield services_1[_0x49ba75(0x7d)][_0x49ba75(0x95)](this['axiosInstance'],{},_0x187510,!![],this[_0x49ba75(0x86)]);return new Set(_0x119553[_0x49ba75(0x9d)](_0x473e7e=>_0x473e7e['Id']));});}[_0x4d5a68(0x95)](){return __awaiter(this,void 0x0,void 0x0,function*(){var _0x55aa4a=_0x1ddb;const _0x385eb5=yield this['listMetadata']([{'metadataType':this[_0x55aa4a(0x80)][_0x55aa4a(0xa2)]}]);if(!_0x385eb5[_0x55aa4a(0x87)])return[];const _0x16426e=yield this[_0x55aa4a(0x82)](_0x385eb5[_0x55aa4a(0x9d)](({listMetadataItem:_0x33aad8})=>_0x33aad8['id']));return _0x385eb5[_0x55aa4a(0x84)](({listMetadataItem:_0x2d0d0f})=>_0x16426e['has'](_0x2d0d0f['id']));});}}exports['default']=InstalledPackagesListMetadata;